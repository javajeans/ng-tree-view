<html ng-app="ngtree-test-app">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>ng-tree example</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
    <script src="dist/ng-tree.min.js"></script>
    <style type="text/css"></style>

    <script type="text/javascript" charset="utf-8">
      var module = angular.module('ngtree-test-app', ['tolgaakyuz.ngtree'])
        .controller('MainController', ['$scope', '$timeout', '$q', function ($scope, $timeout, $q) {
          $scope.source = [
            {
              "id": 28,
              "children": [],
              "name": "Consectetur ex id nisi voluptate occaecat dolore eu non dolor nulla excepteur."
            },
            {
              "id": 82,
              "children": "<ReferenceError: array is not defined>",
              "name": "Cupidatat pariatur pariatur deserunt sint amet anim eiusmod anim dolor et excepteur aliqua elit labore."
            },
            {
              "id": 34,
              "children": [],
              "name": "Tempor culpa ipsum aliquip occaecat amet excepteur ut in."
            },
            {
              "id": 59,
              "children": [],
              "name": "Duis pariatur culpa dolor ad tempor nostrud veniam."
            },
            {
              "id": 87,
              "children": [],
              "name": "Nostrud aute aliquip veniam id officia est voluptate sunt ipsum labore id."
            }
          ]

          $scope.onSelected = function (item) {
            console.log(item);
          }

          $scope.load = function (item) {
            var d = $q.defer();

            $timeout(function () {
              var children = [
                {id: 106, name: 'testing', children: []},
                {id: 107, name: 'testing2', children: []}
              ];

              d.resolve(children);
            }, 3000);

            return d.promise;
          }
        }]);
    </script>
  </head>

  <body ng-controller="MainController">
    <h1>ng-tree</h1>
    <h3><a href="https://github.com/tolgaakyuz/ng-tree">[github]</a></h3>

    <ng-tree
      ng-tree-source="source"
      ng-tree-on-select="onSelected"
      ng-tree-load="load">
    </ng-tree>
  </body>
</html>
